/*
This is a solution to HW1 for CSE344, and a copy of the output
generated by hw1_solution.sql.
*/

/* Problem 1,a */
create table R(A int, B int);

/* Problem 1,b */
insert into R values (2,4);
insert into R values(1,1);
insert into R values (3,2);

/* Problem 1,c */
select * from R;
2|4
1|1
3|2

/* Problem 1,d */
/* See hw1_solution.sql for explanation of why the insert does not fail. */
insert into R values ('5','2');
select * from R;
2|4
1|1
3|2
5|2

/* Problem 1,e */
select A from R;
2
1
3
5

/* Problem 1,f */
select * from R where A <= B;
2|4
1|1

/* Problem 2 */
create table MyRestaurants(name varchar(50), food_type varchar(50), distance int, last_visit varchar(10),like_it int);

/* Problem 3 */
insert into MyRestaurants values ('McDonalds','fast food',30,'2011-03-23',1);
insert into MyRestaurants values ('Chipotle','mexican',15,'2011-02-15',0);
insert into MyRestaurants values ('Burger Burger','fast food',15,'2011-03-15',1);
insert into MyRestaurants values ('Olive Garden','italian',30,'2011-03-24',1);
insert into MyRestaurants values ('Arbys','fast food',45,'2010-06-15',0);
insert into MyRestaurants values ('University Teriyaki','teriyaki',15,'2010-06-30',NULL);

/* Problem 4 */
select * from MyRestaurants;
McDonalds|fast food|30|2011-03-23|1
Chipotle|mexican|15|2011-02-15|0
Burger Burger|fast food|15|2011-03-15|1
Olive Garden|italian|30|2011-03-24|1
Arbys|fast food|45|2010-06-15|0
University Teriyaki|teriyaki|15|2010-06-30|

/* Problem 5,a */
.mode csv
select * from MyRestaurants;
McDonalds,"fast food",30,2011-03-23,1
Chipotle,mexican,15,2011-02-15,0
"Burger Burger","fast food",15,2011-03-15,1
"Olive Garden",italian,30,2011-03-24,1
Arbys,"fast food",45,2010-06-15,0
"University Teriyaki",teriyaki,15,2010-06-30,

/* Problem 5,b */
.mode list
.separator " | "
select * from MyRestaurants;
McDonalds | fast food | 30 | 2011-03-23 | 1
Chipotle | mexican | 15 | 2011-02-15 | 0
Burger Burger | fast food | 15 | 2011-03-15 | 1
Olive Garden | italian | 30 | 2011-03-24 | 1
Arbys | fast food | 45 | 2010-06-15 | 0
University Teriyaki | teriyaki | 15 | 2010-06-30 | 

/* Problem 5,c */
.mode column
.width 15 15 15 15 15
select * from MyRestaurants;
McDonalds        fast food        30               2011-03-23       1              
Chipotle         mexican          15               2011-02-15       0              
Burger Burger    fast food        15               2011-03-15       1              
Olive Garden     italian          30               2011-03-24       1              
Arbys            fast food        45               2010-06-15       0              
University Teri  teriyaki         15               2010-06-30                      

/* Problem 5,d */
.headers on
.mode csv
select * from MyRestaurants;
name,food_type,distance,last_visit,like_it
McDonalds,"fast food",30,2011-03-23,1
Chipotle,mexican,15,2011-02-15,0
"Burger Burger","fast food",15,2011-03-15,1
"Olive Garden",italian,30,2011-03-24,1
Arbys,"fast food",45,2010-06-15,0
"University Teriyaki",teriyaki,15,2010-06-30,

.mode list
.separator " | "
select * from MyRestaurants;
name | food_type | distance | last_visit | like_it
McDonalds | fast food | 30 | 2011-03-23 | 1
Chipotle | mexican | 15 | 2011-02-15 | 0
Burger Burger | fast food | 15 | 2011-03-15 | 1
Olive Garden | italian | 30 | 2011-03-24 | 1
Arbys | fast food | 45 | 2010-06-15 | 0
University Teriyaki | teriyaki | 15 | 2010-06-30 | 

.mode column
.width 15 15 15 15 15
select * from MyRestaurants;         
name             food_type        distance         last_visit       like_it        
---------------  ---------------  ---------------  ---------------  ---------------
McDonalds        fast food        30               2011-03-23       1              
Chipotle         mexican          15               2011-02-15       0              
Burger Burger    fast food        15               2011-03-15       1              
Olive Garden     italian          30               2011-03-24       1              
Arbys            fast food        45               2010-06-15       0              
University Teri  teriyaki         15               2010-06-30                      

/* Problem 6 */
select *, case when like_it = 1 then 'I liked it' when like_it = 0 then 'I hated it' end as iLike from MyRestaurants;         
name             food_type        distance         last_visit       like_it          iLike     
---------------  ---------------  ---------------  ---------------  ---------------  ----------
McDonalds        fast food        30               2011-03-23       1                I liked it
Chipotle         mexican          15               2011-02-15       0                I hated it
Burger Burger    fast food        15               2011-03-15       1                I liked it
Olive Garden     italian          30               2011-03-24       1                I liked it
Arbys            fast food        45               2010-06-15       0                I hated it
University Teri  teriyaki         15               2010-06-30                                  

/* Problem 7 */
/* inserting tuple just so we can see that it works */
insert into MyRestaurants values ('Old Spaghetti Factory','italian',45,'2010-06-15',1);
select * from MyRestaurants where like_it =1 and date(last_visit) < date('now','-3 month');   
name             food_type        distance         last_visit       like_it        
---------------  ---------------  ---------------  ---------------  ---------------
Old Spaghetti F  italian          45               2010-06-15       1              

